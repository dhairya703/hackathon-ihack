// components/CompletedExploits.jsx
import React, { useContext } from "react";
import { ExploitContext } from "../context/ExploitContext";
import { Link } from "react-router-dom";

export default function CompletedExploits() {
  const { completedExploits, markAsActive } = useContext(ExploitContext);

  return (
    <div style={{ padding: "20px" }}>
      <h2>Completed Exploits</h2>
      <Link to="/">
        <button style={{ marginBottom: "15px" }}>Back to Dashboard</button>
      </Link>
      {completedExploits.length === 0 ? (
        <p>No exploits marked as completed.</p>
      ) : (
        completedExploits.map((exploit) => (
          <div
            key={exploit.id}
            style={{
              border: "1px solid #aaa",
              padding: "10px",
              marginBottom: "10px",
              borderRadius: "5px",
              backgroundColor: "#f1f1f1",
            }}
          >
            <strong>{exploit.id}</strong> â€” CVSS: {exploit.cvss}
            <div>{exploit.description}</div>
            <div><strong>Service:</strong> {exploit.service}</div>
            <div><strong>Port:</strong> {exploit.port}</div>
            <button
              onClick={() => markAsActive(exploit.id)}
              style={{ marginTop: "8px" }}
            >
              Mark as Active Again
            </button>
          </div>
        ))
      )}
    </div>
  );
}
